---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { projects } from '../../data/content';

export function getStaticPaths() {
  return projects.map((project) => ({ params: { slug: project.slug } }));
}

const { slug } = Astro.params;
const project = projects.find((p) => p.slug === slug);
if (!project) return Astro.redirect('/works');
---
<BaseLayout title={project.title}>
  <article>
    <h1>{project.title}</h1>
    {project.isPrivate && <p class="private">Private case study</p>}
    <h2>Meta data</h2>
    <ul>
      <li>Year: {project.year}</li>
      <li>Company: {project.company}</li>
      <li>Website: {project.website || 'N/A'}</li>
      <li>Team members: {project.teamMembers.join(', ')}</li>
      <li>Role: {project.role}</li>
    </ul>
    <h2>Overview</h2>
    <p>{project.overview}</p>
    <h2>Case study</h2>
    <p>Text + images sections are enabled in schema plan and will be connected to Sanity Portable Text blocks.</p>
    <h2>Outcome / impact metrics</h2>
    <ul>
      {project.impact.map((item) => <li>{item}</li>)}
    </ul>
  </article>
</BaseLayout>

<style>
article{max-width:820px}.private{color:var(--muted)}h1{font-size:clamp(2rem,4vw,3rem)}h2{margin-top:2rem}
</style>
